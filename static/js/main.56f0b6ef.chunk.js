(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{30:function(e,t,n){e.exports=n(51)},39:function(e,t,n){},41:function(e,t,n){},51:function(e,t,n){"use strict";n.r(t);var c=n(0),o=n.n(c),a=n(22),r=n.n(a),i=(n(39),n(41),n(16)),l=n(57),u=n(26),s=Object(u.a)("/webRTCPeers",{path:"/webrtc"}),d=function(){var e=Object(c.useRef)(),t=Object(c.useRef)(),n=Object(c.useRef)(new RTCPeerConnection(null)),a=Object(c.useRef)(),r=Object(c.useState)(!0),u=Object(i.a)(r,2),d=u[0],f=u[1],m=Object(c.useState)(!1),b=Object(i.a)(m,2),g=b[0],v=b[1],E=Object(c.useState)("Make a call now"),h=Object(i.a)(E,2),p=h[0],C=h[1];Object(c.useEffect)(function(){s.on("connection-success",function(e){console.log(e)}),s.on("sdp",function(e){console.log(e.stream),n.current.setRemoteDescription(new RTCSessionDescription(e.stream)),a.current.value=JSON.stringify(e.stream),"offer"==e.stream.type?(f(!1),v(!0),C("Incoming Call ....")):C("Call establshed ")}),s.on("candidate",function(e){console.log(e),n.current.addIceCandidate(new RTCIceCandidate(e))}),navigator.mediaDevices.getUserMedia({Audio:!0,video:!0}).then(function(t){e.current.srcObject=t,t.getTracks().forEach(function(e){c.addTrack(e,t)}),console.log("Got MediaStream:",t.id)}).catch(function(e){console.error("Error accessing media devices.",e)});var c=new RTCPeerConnection(null);c.onicecandidate=function(e){e.candidate&&(console.log(JSON.stringify(e.candidate)),O("candidate",e.candidate))},c.oniceconnectionstatechange=function(e){console.log(e,"iceconnection")},c.ontrack=function(e){console.log(e),t.current.srcObject=e.streams[0]},n.current=c},[]);var O=function(e,t){s.emit(e,t)},w=function(e){console.log(JSON.stringify(e)),n.current.setLocalDescription(e),O("sdp",{stream:e})},R=function(){n.current.createOffer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(e){w(e),f(!1),C("Callong ....")}).catch(function(e){return console.log(e)})},j=function(){n.current.createAnswer({offerToReceiveAudio:!0,offerToReceiveVideo:!0}).then(function(e){w(e),v(!1),C("Call established")}).catch(function(e){return console.log(e,"tttttttttttttttttttttttttttttttttttttttttttt")})};return o.a.createElement(o.a.Fragment,null,o.a.createElement(l.a,null,o.a.createElement("h1",null,"sehrish"),o.a.createElement("div",null,o.a.createElement("video",{ref:e,autoPlay:!0,style:{width:"300px",border:"1px solid"}}),o.a.createElement("video",{ref:t,autoPlay:!0,style:{width:"300px",border:"1px solid"}}),o.a.createElement("br",null),d?o.a.createElement("div",null,o.a.createElement("button",{onClick:R},"Call")):g?o.a.createElement("div",null,o.a.createElement("button",{onClick:j},"Answer")):void 0,o.a.createElement("div",null,p),o.a.createElement("textarea",{ref:a}),o.a.createElement("br",null))))};var f=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(d,null))},m=function(e){e&&e instanceof Function&&n.e(1).then(n.bind(null,56)).then(function(t){var n=t.getCLS,c=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),c(e),o(e),a(e),r(e)})};r.a.createRoot(document.getElementById("root")).render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(f,null))),m()}},[[30,3,2]]]);
//# sourceMappingURL=main.56f0b6ef.chunk.js.map